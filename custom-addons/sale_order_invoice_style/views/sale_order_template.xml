<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="custom_invoice_document" inherit_id="account.report_invoice_document">
        <xpath expr="//div[@class='page']" position="replace">
            <div class="page" style="font-family: Arial, sans-serif; max-width: 210mm; margin: 0 auto; padding: 20px; background: #fff; page-break-after: avoid;">
                <!-- ==================== HEADER WITH LOGO LEFT & RIGHT ==================== -->
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; border-bottom: 3px solid #294a7f; padding-bottom: 10px;">
                    <!-- Left Logo -->
                    <img t-att-src="'/sale_order_invoice_style/static/src/img/logo.png'" alt="SW Logo" style="height: 50px;"/>
                    <!-- Center: Amharic + English Title -->
                    <div style="text-align: center; flex: 1;">
                        <h4 style="margin: 0; font-size: 12px; color: #555; font-weight: normal; font-family: 'Noto Sans Ethiopic', Arial, sans-serif;">
                            አስማች እና ላክ
                        </h4>
                        <h1 style="margin: 5px 0 0; font-size: 20px; font-weight: bold; color: #294a7f;">
                            SIMPLE WAY GLOBAL IMPORT &amp; EXPORT
                        </h1>
                    </div>
                    <!-- Right Logo -->
                    <img t-att-src="'/sale_order_invoice_style/static/src/img/logo.png'" alt="SW Logo" style="height: 50px;"/>
                </div>
                <!-- ==================== INVOICE & COMPANY DETAILS ==================== -->
                <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 11px;">
                    <div style="flex: 1; padding-right: 10px;">
                        <h4 style="font-weight: bold; color: #2c3e50; margin: 0 0 5px; text-align: center;">Invoice</h4>
                        <t t-set="sale_order" t-value="o.env['sale.order'].search([('name', '=', o.invoice_origin)], limit=1)"/>
                        <table style="width: 100%;">
                            <tr>
                                <td style="width: 100px;"><strong>Invoice No:</strong></td>
                                <td><span t-field="o.name"/></td>
                            </tr>
                            <tr>
                                <td><strong>Order No:</strong></td>
                                <td><span t-esc="o.invoice_origin or ''"/></td>
                            </tr>
                            <tr>
                                <td><strong>Custom (PO):</strong></td>
                                <td><span t-esc="sale_order.client_order_ref or ''"/></td>
                            </tr>
                            <tr>
                                <td><strong>Invoice Date:</strong></td>
                                <td><span t-field="o.invoice_date" t-options='{"widget":"date","format":"dd/MM/yyyy"}'/></td>
                            </tr>
                            <tr t-if="o.invoice_date_due">
                                <td><strong>Due Date:</strong></td>
                                <td><span t-field="o.invoice_date_due" t-options='{"widget":"date","format":"dd/MM/yyyy"}'/></td>
                            </tr>
                        </table>
                    </div>
                    <div style="flex: 1; text-align: right; padding-left: 10px;">
                        <div style="text-align: center; margin-bottom: 5px;">
                            <p style="font-weight: bold; color: #2c3e50; margin: 0;">SIMPLE WAY GLOBAL IMPORT &amp; EXPORT</p>
                        </div>
                        <table style="width: 100%; text-align: right;">
                            <tr>
                                <td style="width: 100px;"><strong>TIN Number:</strong></td>
                                <td><span t-esc="o.company_id.vat or 'N/A'"/></td>
                            </tr>
                            <tr>
                                <td><strong>VAT Number:</strong></td>
                                <td><span t-esc="o.company_id.vat or 'N/A'"/></td>
                            </tr>
                            <tr>
                                <td><strong>Location:</strong></td>
                                <td><span t-esc="o.company_id.city or ''"/>, <span t-esc="o.company_id.country_id.name or 'Ethiopia'"/></td>
                            </tr>
                            <tr>
                                <td><strong>Email:</strong></td>
                                <td><span t-esc="o.company_id.email or 'info@ethiotradeglobal.com'"/></td>
                            </tr>
                            <tr>
                                <td><strong>Tel:</strong></td>
                                <td><span t-esc="o.company_id.phone or '+251911640551/+251900505599'"/></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- ==================== CUSTOMER & BILLING ==================== -->
                <div style="display: flex; margin-bottom: 20px; justify-content: space-between; font-size: 11px;">
                    <div style="flex: 1; padding-right: 10px;">
                        <h3 style="font-size: 13px; color: #2c3e50; margin-bottom: 5px;">Customer Details</h3>
                        <table style="width: 100%;">
                            <tr>
                                <td style="width: 80px;"><strong>Customer:</strong></td>
                                <td><span t-esc="o.partner_id.name or 'N/A'"/></td>
                            </tr>
                            <tr>
                                <td><strong>Email:</strong></td>
                                <td><span t-esc="o.partner_id.email or 'N/A'"/></td>
                            </tr>
                            <tr>
                                <td><strong>Tel:</strong></td>
                                <td><span t-esc="o.partner_id.phone or 'N/A'"/></td>
                            </tr>
                        </table>
                    </div>
                    <div style="flex: 1; padding-left: 10px; text-align: right;">
                        <h3 style="font-size: 13px; color: #2c3e50; margin-bottom: 5px; text-align: right;">Billing Address</h3>
                        <table style="text-align: right; width: 100%;">
                            <tr>
                                <td style="width: 90px;"><strong>Address:</strong></td>
                                <td><span t-esc="o.partner_invoice_id.street or o.partner_id.street or 'N/A'"/>, <span t-esc="o.partner_invoice_id.city or o.partner_id.city or ''"/>, <span t-esc="o.partner_invoice_id.country_id.name or ''"/></td>
                            </tr>
                            <tr>
                                <td><strong>VAT Reg. No:</strong></td>
                                <td><span t-esc="o.partner_id.vat or 'N/A'"/></td>
                            </tr>
                            <tr>
                                <td><strong>TIN Number:</strong></td>
                                <td><span t-esc="o.partner_id.vat or 'N/A'"/></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- ==================== LINE ITEMS ==================== -->
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 10px; border: 1px solid #dee2e6;">
                    <thead style="background: #294a7f; color: white;">
                        <tr>
                            <th style="padding: 8px 5px; text-align: center;">#</th>
                            <th style="padding: 8px 5px; text-align: left;">Item Name</th>
                            <th style="padding: 8px 5px; text-align: center;">Qty</th>
                            <th style="padding: 8px 5px; text-align: right;">Unit Price</th>
                            <th style="padding: 8px 5px; text-align: center;">Tax</th>
                            <th style="padding: 8px 5px; text-align: right;">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="o.invoice_line_ids" t-as="line">
                            <tr style="border-bottom: 1px solid #eee;">
                                <td style="padding: 6px 5px; text-align: center;">
                                    <t t-esc="line_index + 1"/>
                                </td>
                                <td style="padding: 6px 5px; white-space: normal; word-break: break-word;">
                                    <span t-field="line.name"/>
                                </td>
                                <td style="padding: 6px 5px; text-align: center;">
                                    <span t-field="line.quantity"/>
                                </td>
                                <td style="padding: 6px 5px; text-align: right;">
                                    <span t-field="line.price_unit" t-options='{"widget":"monetary","display_currency":o.currency_id}'/>
                                </td>
                                <td style="padding: 6px 5px; text-align: center;">
                                    <t t-if="line.tax_ids">
                                        <t t-esc="', '.join([tax.name for tax in line.tax_ids])"/>
                                    </t>
                                    <t t-else="">-</t>
                                </td>
                                <td style="padding: 6px 5px; text-align: right;">
                                    <span t-field="line.price_subtotal" t-options='{"widget":"monetary","display_currency":o.currency_id}'/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
                <!-- ==================== TOTALS + SIGNATURES ON LEFT ==================== -->
                <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                    <!-- Left: Signatures -->
                    <div style="width: 48%; font-size: 10px; line-height: 1.4;">
                        <p style="margin: 0 0 10px;">
                            <strong>Prepared by:</strong><br/>
                            Samuel Tadesse<br/>
                            <span style="color: #666;">Sales &amp; Operations Officer</span>
                        </p>
                        <p style="margin: 0;">
                            <strong>Approved By:</strong><br/>
                            Meron Hailu<br/>
                            <span style="color: #666;">Finance &amp; Compliance Manager</span>
                        </p>
                    </div>
                    <!-- Right: Totals -->
                    <div style="width: 48%;">
                        <table style="width: 100%; font-size: 11px; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 5px 0;"><strong>Untaxed Amount:</strong></td>
                                <td style="padding: 5px 0; text-align: right;"><span t-field="o.amount_untaxed" t-options='{"widget":"monetary","display_currency":o.currency_id}'/></td>
                            </tr>
                            <t t-set="subtotal" t-value="o.amount_untaxed + o.amount_tax"/>
                            <tr>
                                <td style="padding: 5px 0;"><strong>Subtotal:</strong></td>
                                <td style="padding: 5px 0; text-align: right;"><span t-esc="subtotal" t-options='{"widget":"monetary","display_currency":o.currency_id}'/></td>
                            </tr>
                            <t t-set="discount" t-value="o.amount_total - subtotal"/>
                            <tr>
                                <td style="padding: 5px 0;"><strong>Discount:</strong></td>
                                <td style="padding: 5px 0; text-align: right;"><span t-esc="discount" t-options='{"widget":"monetary","display_currency":o.currency_id}'/></td>
                            </tr>
                            <tr>
                                <td colspan="2" style="background: #294a7f; color: white; padding: 10px; font-size: 14px; font-weight: bold; text-align: center;">
                                    <strong>Total: <span t-field="o.amount_total" t-options='{"widget":"monetary","display_currency":o.currency_id}'/></strong>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- ==================== FOOTER ==================== -->
                <div style="text-align: center; padding-top: 10px; border-top: 1px solid #294a7f; font-size: 9px; color: #555;">
                    <p style="margin: 2px 0;">ALEM GEBRE BUILDING 08 FLOOR GERJI MEBRATHAILE, ADDIS ABEBA, ETHIOPIA</p>
                    <p style="margin: 2px 0;">TEL: +251911640551 / +251900505599</p>
                </div>
            </div>
        </xpath>
    </template>
</odoo>
