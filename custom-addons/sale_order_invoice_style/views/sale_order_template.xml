<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="template_sale_order">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page"
                         style="font-family: Arial, sans-serif; max-width: 210mm; margin: 0 auto; padding: 20px; background: #fff;">

                        <!-- ==================== HEADER WITH LOGO LEFT & RIGHT ==================== -->
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; border-bottom: 3px solid #294a7f; padding-bottom: 15px;">
                            <!-- Left Logo -->
                            <img t-att-src="'/your_module_name/static/src/img/logo.png'"
                                 alt="SW Logo"
                                 style="height: 55px;"/>

                            <!-- Center: Amharic + English Title -->
                            <div style="text-align: center; flex: 1;">
                                <h4 style="margin: 0; font-size: 13px; color: #555; font-weight: normal;">
                                    አስማች እና ላክ
                                </h4>
                                <h1 style="margin: 5px 0 0; font-size: 22px; font-weight: bold; color: #294a7f;">
                                    SIMPLE WAY GLOBAL IMPORT &amp; EXPORT
                                </h1>
                            </div>

                            <!-- Right Logo -->
                            <img t-att-src="'/your_module_name/static/src/img/logo.png'"
                                 alt="SW Logo"
                                 style="height: 55px;"/>
                        </div>


                        <!-- ==================== INVOICE & COMPANY DETAILS ==================== -->
                        <div style="display: flex; justify-content: space-between; margin-bottom: 25px; font-size: 12px;">
                            <div>
                                <!-- ==================== INVOICE TITLE ==================== -->
                                <div style="text-align: center; margin: 20px 0;">
                                    <h4 style="font-weight: bold; color: #2c3e50; margin: 0;">Invoice</h4>
                                </div>
                                <table>
                                    <tr>
                                        <td style="width: 110px;">
                                            <strong>Invoice No:</strong>
                                        </td>
                                        <td>
                                            <span t-field="o.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>Order No:</strong>
                                        </td>
                                        <td>
                                            <span t-field="o.client_order_ref"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>Custom (PO):</strong>
                                        </td>
                                        <td>
                                            <span t-field="o.client_order_ref"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>Invoice Date:</strong>
                                        </td>
                                        <td>
                                            <span t-field="o.date_order"
                                                  t-options='{"widget":"date","format":"dd/MM/yyyy"}'/>
                                        </td>
                                    </tr>
                                    <tr t-if="o.commitment_date">
                                        <td>
                                            <strong>Due Date:</strong>
                                        </td>
                                        <td>
                                            <span t-field="o.commitment_date"
                                                  t-options='{"widget":"date","format":"dd/MM/yyyy"}'/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div style="text-align: right;">
                                <div style="text-align: center; margin: 20px 0;">
                                    <p style="font-weight: bold; color: #2c3e50; margin: 0;">SIMPLE WAY GLOBAL IMPORT
                                        &amp; EXPORT
                                    </p>
                                </div>
                                <table>
                                    <tr>
                                        <td style="width: 110px;">
                                            <strong>TIN Number:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.company_id.vat or 'N/A'"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>VAT Number:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.company_id.vat or 'N/A'"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>Location:</strong>
                                        </td>
                                        <td><span t-esc="o.company_id.city or ''"/>,
                                            <span t-esc="o.company_id.country_id.name or 'Ethiopia'"/>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            <strong>Email:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.company_id.email or 'info@ethiotradeglobal.com'"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>Tel:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.company_id.phone or '+251911640551/+251900505599'"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <!-- ==================== CUSTOMER & BILLING ==================== -->
                        <div style="display: flex; margin-bottom: 25px; justify-content: space-between; font-size: 12px;">
                            <div style="flex: 1; padding-right: 15px;">
                                <h3 style="font-size: 14px; color: #2c3e50; margin-bottom: 8px;">Customer Details</h3>
                                <table>
                                    <tr>
                                        <td style="width: 80px;">
                                            <strong>Customer:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.partner_id.name or 'N/A'"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>Email:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.partner_id.email or 'N/A'"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>Tel:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.partner_id.phone or 'N/A'"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div style="flex: 1; padding-left: 15px;">
                                <h3 style="font-size: 14px; color: #2c3e50; margin-bottom: 8px; text-align: right;">
                                    Billing Address
                                </h3>
                                <table style="text-align: right;">
                                    <tr>
                                        <td style="width: 100px;">
                                            <strong>Address:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.partner_shipping_id.street or o.partner_id.street or 'N/A'"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>VAT Reg. No:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.partner_id.vat or 'N/A'"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <strong>TIN Number:</strong>
                                        </td>
                                        <td>
                                            <span t-esc="o.partner_id.vat or 'N/A'"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <!-- ==================== LINE ITEMS ==================== -->
                        <table style="width: 100%; border-collapse: collapse; margin-bottom: 25px; font-size: 11px; border: 1px solid #dee2e6;">
                            <thead style="background: #294a7f; color: white;">
                                <tr>
                                    <th style="padding: 10px 6px; text-align: center;">#</th>
                                    <th style="padding: 10px 6px; text-align: left;">Item Name</th>
                                    <th style="padding: 10px 6px; text-align: center;">Qty</th>
                                    <th style="padding: 10px 6px; text-align: right;">Unit Price</th>
                                    <th style="padding: 10px 6px; text-align: center;">Tax</th>
                                    <th style="padding: 10px 6px; text-align: right;">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="o.order_line" t-as="line">
                                    <tr style="border-bottom: 1px solid #eee;">
                                        <td style="padding: 8px 6px; text-align: center;">
                                            <t t-esc="line_index + 1"/>
                                        </td>
                                        <td style="padding: 8px 6px; white-space: pre-wrap;">
                                            <span t-field="line.name"/>
                                        </td>
                                        <td style="padding: 8px 6px; text-align: center;">
                                            <span t-field="line.product_uom_qty"/>
                                        </td>
                                        <td style="padding: 8px 6px; text-align: right;">
                                            <span t-field="line.price_unit"
                                                  t-options='{"widget":"monetary","display_currency":o.currency_id}'/>
                                        </td>
                                        <td style="padding: 8px 6px; text-align: center;">
                                            <t t-if="line.tax_id">
                                                <t t-esc="', '.join([tax.name for tax in line.tax_id])"/>
                                            </t>
                                            <t t-else="">-</t>
                                        </td>
                                        <td style="padding: 8px 6px; text-align: right;">
                                            <span t-field="line.price_subtotal"
                                                  t-options='{"widget":"monetary","display_currency":o.currency_id}'/>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <!-- ==================== TOTALS + SIGNATURES ON LEFT ==================== -->
                        <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
                            <!-- Left: Signatures -->
                            <div style="width: 48%; font-size: 11px; line-height: 1.5;">
                                <p style="margin: 0 0 15px;">
                                    <strong>Prepared by:</strong>
                                    <br/>
                                    Samuel Tadesse
                                    <br/>
                                    <span style="color: #666;">Sales &amp; Operations Officer</span>
                                </p>
                                <p style="margin: 0;">
                                    <strong>Approved By:</strong>
                                    <br/>
                                    Meron Hailu
                                    <br/>
                                    <span style="color: #666;">Finance &amp; Compliance Manager</span>
                                </p>
                            </div>

                            <!-- Right: Totals -->
                            <div style="width: 48%;">
                                <table style="width: 100%; font-size: 12px; border-collapse: collapse;">
                                    <tr>
                                        <td style="padding: 6px 0;">
                                            <strong>Untaxed Amount:</strong>
                                        </td>
                                        <td style="padding: 6px 0; text-align: right;">
                                            <span t-field="o.amount_untaxed"
                                                  t-options='{"widget":"monetary","display_currency":o.currency_id}'/>
                                        </td>
                                    </tr>
                                    <t t-set="subtotal" t-value="o.amount_untaxed + o.amount_tax"/>
                                    <tr>
                                        <td style="padding: 6px 0;">
                                            <strong>Subtotal:</strong>
                                        </td>
                                        <td style="padding: 6px 0; text-align: right;">
                                            <span t-esc="subtotal"
                                                  t-options='{"widget":"monetary","display_currency":o.currency_id}'/>
                                        </td>
                                    </tr>
                                    <t t-set="discount" t-value="o.amount_total - subtotal"/>
                                    <tr>
                                        <td style="padding: 6px 0;">
                                            <strong>Discount:</strong>
                                        </td>
                                        <td style="padding: 6px 0; text-align: right;">
                                            <span t-esc="discount"
                                                  t-options='{"widget":"monetary","display_currency":o.currency_id}'/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"
                                            style="background:#294a7f; color:white; padding:12px;
                                                   font-size:16px; font-weight:bold; text-align:center;">
                                            <strong>Total:
                                                <span t-field="o.amount_total"
                                                      t-options='{"widget":"monetary","display_currency":o.currency_id}'/>
                                            </strong>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <!-- ==================== FOOTER ==================== -->
                        <div style="text-align: center; margin-top: 40px; padding-top: 15px; border-top: 1px solid #294a7f; font-size: 10px; color: #555;">
                            <p style="margin: 3px 0;">ALEM GEBRE BUILDING 08 FLOOR GERJI MEBRATHAILE, ADDIS ABEBA,
                                ETHIOPIA
                            </p>
                            <p style="margin: 3px 0;">TEL: +251911640551 / +251900505599</p>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
